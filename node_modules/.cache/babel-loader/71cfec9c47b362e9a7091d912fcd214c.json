{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport * as React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport { useSpring, useTransition, animated, config } from \"react-spring\";\nvar newText = function (text) {\n  return {\n    key: \"\" + Date.now(),\n    data: text\n  };\n};\nvar TextTransition = function (_a) {\n  var text = _a.text,\n    direction = _a.direction,\n    inline = _a.inline,\n    delay = _a.delay,\n    className = _a.className,\n    style = _a.style,\n    noOverflow = _a.noOverflow,\n    springConfig = _a.springConfig;\n  var placeholderRef = React.useRef(null);\n  var _b = React.useState(function () {\n      return newText(text.toString());\n    }),\n    content = _b[0],\n    setContent = _b[1];\n  var _c = React.useState(0),\n    timeoutId = _c[0],\n    setTimeoutId = _c[1];\n  var _d = React.useState(true),\n    isFirstRun = _d[0],\n    setIsFirstRun = _d[1];\n  var _e = React.useState({\n      width: inline ? 0 : \"auto\"\n    }),\n    width = _e[0],\n    setWidth = _e[1];\n  var transitions = useTransition(content, function (item) {\n    return item.key;\n  }, {\n    from: {\n      opacity: 0,\n      transform: \"translateY(\" + (direction === \"down\" ? \"-100%\" : \"100%\") + \")\"\n    },\n    enter: {\n      opacity: 1,\n      transform: \"translateY(0%)\"\n    },\n    leave: {\n      opacity: 0,\n      transform: \"translateY(\" + (direction === \"down\" ? \"100%\" : \"-100%\") + \")\"\n    },\n    config: springConfig,\n    immediate: isFirstRun,\n    onDestroyed: function () {\n      setIsFirstRun(false);\n    }\n  });\n  var animatedProps = useSpring({\n    to: width,\n    config: springConfig,\n    immediate: isFirstRun\n  });\n  React.useEffect(function () {\n    setTimeoutId(setTimeout(function () {\n      if (!placeholderRef.current) return;\n      placeholderRef.current.innerHTML = text.toString();\n      if (inline) setWidth({\n        width: placeholderRef.current.offsetWidth\n      });\n      setContent(newText(text.toString()));\n    }, delay));\n  }, [text]);\n  React.useEffect(function () {\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, []);\n  return React.createElement(animated.div, {\n    className: \"text-transition \" + className,\n    style: __assign(__assign(__assign({}, animatedProps), {\n      whiteSpace: inline ? \"nowrap\" : \"normal\",\n      display: inline ? \"inline-block\" : \"block\",\n      position: \"relative\"\n    }), style)\n  }, React.createElement(\"span\", {\n    ref: placeholderRef,\n    style: {\n      visibility: \"hidden\"\n    },\n    className: \"text-transition_placeholder\"\n  }), React.createElement(\"div\", {\n    className: \"text-transition_inner\",\n    style: {\n      overflow: noOverflow ? \"hidden\" : \"visible\",\n      display: \"block\",\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      height: \"100%\",\n      width: \"100%\"\n    }\n  }, transitions.map(function (_a) {\n    var item = _a.item,\n      props = _a.props,\n      key = _a.key;\n    return React.createElement(animated.div, {\n      key: key,\n      style: __assign(__assign({}, props), {\n        position: \"absolute\"\n      })\n    }, item.data);\n  })));\n};\nTextTransition.propTypes = {\n  text: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  direction: PropTypes.oneOf([\"up\", \"down\"]),\n  inline: PropTypes.bool,\n  noOverflow: PropTypes.bool,\n  delay: PropTypes.number,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  springConfig: PropTypes.any\n};\nTextTransition.defaultProps = {\n  direction: \"up\",\n  noOverflow: false,\n  inline: false,\n  springConfig: config.default,\n  delay: 0,\n  className: \"\",\n  style: {}\n};\nexport default TextTransition;","map":{"version":3,"names":["React","PropTypes","useSpring","useTransition","animated","config","newText","text","key","Date","now","data","TextTransition","_a","direction","inline","delay","className","style","noOverflow","springConfig","placeholderRef","useRef","_b","useState","toString","content","setContent","_c","timeoutId","setTimeoutId","_d","isFirstRun","setIsFirstRun","_e","width","setWidth","transitions","item","from","opacity","transform","enter","leave","immediate","onDestroyed","animatedProps","to","useEffect","setTimeout","current","innerHTML","offsetWidth","clearTimeout","createElement","div","__assign","whiteSpace","display","position","ref","visibility","overflow","top","left","height","map","props","propTypes","oneOfType","string","number","isRequired","oneOf","bool","object","any","defaultProps","default"],"sources":["../../src/components/TextTransition.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}